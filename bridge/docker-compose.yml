services:
  bascula-bridge:
    build: .
    container_name: bascula-bridge
    restart: unless-stopped
    env_file:
      - .env
    # Linux host serial mapping (ajusta seg√∫n tu equipo)
    devices:
      - "${BASCULA_PUERTO_SERIAL:-/dev/ttyUSB0}:${BASCULA_PUERTO_SERIAL:-/dev/ttyUSB0}"
    volumes:
      - ./logs:/app/logs
    working_dir: /app
    command: ["python", "/app/bascula_bridge.py"]

  bascula-simulador:
    build: .
    container_name: bascula-simulador
    restart: unless-stopped
    env_file:
      - .env
    volumes:
      - ./logs:/app/logs
    working_dir: /app
    command: ["python", "/app/bascula_simulador.py"]
